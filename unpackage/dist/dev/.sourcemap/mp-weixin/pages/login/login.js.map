{"version":3,"file":"login.js","sources":["pages/login/login.vue","../../HBuilderX.4.66.2025051912/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbG9naW4vbG9naW4udnVl"],"sourcesContent":["<template>\n  <view class=\"container\">\n    <!-- 背景图作为层级最低层 -->\n    <image class=\"bg-img\" src=\"/static/bg.jpg\" mode=\"aspectFill\" />\n\n    <view class=\"img-a\">\n      <view class=\"t-b\">狮山云瞳</view>\n      <view class=\"t-c\">双目智采秒析玉米表型，一键开启智慧育种新范式！</view>\n    </view>\n\n    <view class=\"logo\">\n      <image \n        :src=\"logoUrl\" \n        alt=\"狮山云瞳logo\" \n        mode=\"aspectFill\" \n        class=\"logo-img\" \n        @load=\"onLogoLoad\" \n        @error=\"onLogoError\"\n      />\n    </view>\n\n    <view class=\"login-view\">\n      <view class=\"t-login\">\n        <form class=\"cl\">\n          <view class=\"t-a\">\n            <input type=\"text\" name=\"phone\" placeholder=\"请输入您的用户名\" maxlength=\"11\" v-model=\"phone\" />\n          </view>\n          <view class=\"t-a\">\n            <input type=\"password\" name=\"code\" maxlength=\"18\" placeholder=\"请输入您的密码\" v-model=\"pwd\" />\n          </view>\n          <button @tap=\"login()\">登 录</button>\n        </form>\n      </view>\n    </view>\n  </view>\n</template>\n\n\n<script>\nimport { request } from '@/components/request.js'\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\tphone: '', // 用户名\n\t\t\tpwd: '', // 密码\n\t\t\tlogoUrl: '/static/logo.png', // 确保图片路径正确（区分大小写）\n\t\t\tsystemInfo: {}\n\t\t};\n\t},\n\tonLoad() {\n\t\tthis.calculateLayout();\n\t\tuni.getSystemInfo({\n\t\t\tsuccess: (res) => {\n\t\t\t\tthis.systemInfo = res;\n\t\t\t\tconsole.log('系统信息:', res); // 调试用\n\t\t\t}\n\t\t});\n\t\tuni.onWindowResize((res) => {\n\t\t\tthis.systemInfo = res;\n\t\t\tthis.calculateLayout();\n\t\t});\n\t},\n\tmethods: {\n\t\tcalculateLayout() {\n\t\t\t// 可根据屏幕宽度动态调整logo大小（可选优化）\n\t\t\t// if (this.systemInfo.windowWidth) {\n\t\t\t//   const logoSize = this.systemInfo.windowWidth * 0.3; // 占屏幕宽度30%\n\t\t\t//   this.logoStyle = { width: `${logoSize}px`, height: `${logoSize}px` };\n\t\t\t// }\n\t\t},\n\t\tasync login() {\n\t\t\t// 登录逻辑保持不变\n\t\t\tif (!this.phone) {\n\t\t\t\tuni.showToast({ title: '请输入您的用户名', icon: 'none' });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!this.pwd) {\n\t\t\t\tuni.showToast({ title: '请输入您的密码', icon: 'none' });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tconst res = await request({\n\t\t\t\t\turl: '/user/login',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\tusername: this.phone,\n\t\t\t\t\t\tpassword: this.pwd\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (res.code === 200 || res.status === 'success') {\n\t\t\t\t\tuni.setStorageSync('token', res.data);\n\t\t\t\t\tuni.showToast({ title: '登录成功', icon: 'none', duration: 1000 });\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tuni.reLaunch({ url: '/pages/index/index' });\n\t\t\t\t\t}, 1000);\n\t\t\t\t} else {\n\t\t\t\t\tuni.showToast({ title: res.message || '登录失败，请检查用户名和密码', icon: 'none' });\n\t\t\t\t}\n\t\t\t} catch (error) {\n\t\t\t\tuni.showToast({ title: '网络错误，请稍后重试', icon: 'none' });\n\t\t\t\tconsole.error('登录失败:', error);\n\t\t\t}\n\t\t},\n\t\t// 图片加载成功回调（调试用）\n\t\tonLogoLoad(e) {\n\t\t\tconsole.log('logo加载成功', e);\n\t\t},\n\t\t// 图片加载失败回调（关键调试）\n\t\tonLogoError(e) {\n\t\t\tconsole.error('logo加载失败:', e);\n\t\t\t// 失败时尝试备用路径（如果有）\n\t\t\t// this.logoUrl = '/static/logo-backup.png';\n\t\t}\n\t}\n};\n</script>\n\n<style scoped>\n.container {\n  position: relative;\n  height: 100vh;\n  width: 100vw;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n}\n\n.bg-img {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  z-index: -1; /* 让背景图位于所有内容之下 */\n}\n\n.img-a {\n\tpadding-top: 80rpx;\n\twidth: 100%;\n\theight: 200rpx;\n\tmargin-left: 40rpx;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n.img-a .t-c{\n\tfont-size: 28rpx;\n\tfont-weight: 400;\n\tline-height: 40rpx;\n\tcolor: rgba(56, 56, 56, 1);\n\ttext-align: left;\n}\n.logo{\n\tmargin: 0 auto;\n\tmargin-top: 30rpx;\n\tmargin-bottom: 70rpx;\n\twidth: 200rpx;\n\theight: 200rpx;\n\topacity: 1;\n\tborder-radius: 50%;\n\tbackground: rgba(250, 239, 210, 1);\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\toverflow: hidden;\n\t/* 调试用：添加边框确认容器位置 */\n\t/* border: 1px solid red; */\n}\n.logo-img {\n\twidth: 100%;\n\theight: 100%;\n\tobject-fit: cover; /* 确保图片填满容器且不变形 */\n}\n/* 其余样式保持不变 */\n.login-view {\n\twidth: 100%;\n\tposition: relative;\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n}\n.t-login {\n\twidth: 80%;\n\tmax-width: 600rpx;\n\tmargin: 0 auto;\n\tfont-size: 28rpx;\n\tpadding-top: 40rpx;\n}\n.t-login button {\n\tfont-size: 28rpx;\n\tcolor: #fff;\n\theight: 90rpx;\n\tline-height: 90rpx;\n\tfont-weight: bold;\n\twidth: 100%;\n\tborder-radius: 45rpx;\n\tbackground: rgba(148, 166, 66, 1);\n\tmargin-top: 60rpx;\n}\n.t-login input {\n\theight: 90rpx;\n\tline-height: 90rpx;\n\tmargin-bottom: 60rpx;\n\tborder-bottom: 1px solid #e9e9e9;\n\tfont-size: 28rpx;\n\tborder-radius: 45rpx;\n\tbackground: rgb(232, 240, 254);\n\tpadding: 0 30rpx;\n}\n.t-b {\n\twidth: 200rpx;\n\theight: 70rpx;\n\tfont-size: 48rpx;\n\tfont-weight: 700;\n\tline-height: 70rpx;\n\tcolor: rgba(0, 0, 0, 1);\n\ttext-align: left;\n}\n</style>","import MiniProgramPage from 'D:/狮山云瞳/狮山云瞳/pages/login/login.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni","request"],"mappings":";;;;AAwCA,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,OAAO;AAAA;AAAA,MACP,KAAK;AAAA;AAAA,MACL,SAAS;AAAA;AAAA,MACT,YAAY,CAAC;AAAA;EAEd;AAAA,EACD,SAAS;AACR,SAAK,gBAAe;AACpBA,kBAAAA,MAAI,cAAc;AAAA,MACjB,SAAS,CAAC,QAAQ;AACjB,aAAK,aAAa;AAClBA,sBAAY,MAAA,MAAA,OAAA,+BAAA,SAAS,GAAG;AAAA,MACzB;AAAA,IACD,CAAC;AACDA,wBAAI,eAAe,CAAC,QAAQ;AAC3B,WAAK,aAAa;AAClB,WAAK,gBAAe;AAAA,IACrB,CAAC;AAAA,EACD;AAAA,EACD,SAAS;AAAA,IACR,kBAAkB;AAAA,IAMjB;AAAA,IACD,MAAM,QAAQ;AAEb,UAAI,CAAC,KAAK,OAAO;AAChBA,sBAAG,MAAC,UAAU,EAAE,OAAO,YAAY,MAAM,OAAK,CAAG;AACjD;AAAA,MACD;AACA,UAAI,CAAC,KAAK,KAAK;AACdA,sBAAG,MAAC,UAAU,EAAE,OAAO,WAAW,MAAM,OAAK,CAAG;AAChD;AAAA,MACD;AACA,UAAI;AACH,cAAM,MAAM,MAAMC,2BAAQ;AAAA,UACzB,KAAK;AAAA,UACL,QAAQ;AAAA,UACR,MAAM;AAAA,YACL,UAAU,KAAK;AAAA,YACf,UAAU,KAAK;AAAA,UAChB;AAAA,QACD,CAAC;AACD,YAAI,IAAI,SAAS,OAAO,IAAI,WAAW,WAAW;AACjDD,wBAAAA,MAAI,eAAe,SAAS,IAAI,IAAI;AACpCA,8BAAI,UAAU,EAAE,OAAO,QAAQ,MAAM,QAAQ,UAAU,IAAK,CAAC;AAC7D,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,SAAS,EAAE,KAAK,qBAAsB,CAAA;AAAA,UAC1C,GAAE,GAAI;AAAA,eACD;AACNA,8BAAI,UAAU,EAAE,OAAO,IAAI,WAAW,kBAAkB,MAAM,OAAK,CAAG;AAAA,QACvE;AAAA,MACC,SAAO,OAAO;AACfA,sBAAG,MAAC,UAAU,EAAE,OAAO,cAAc,MAAM,OAAO,CAAC;AACnDA,2EAAc,SAAS,KAAK;AAAA,MAC7B;AAAA,IACA;AAAA;AAAA,IAED,WAAW,GAAG;AACbA,oBAAA,MAAA,MAAA,OAAA,gCAAY,YAAY,CAAC;AAAA,IACzB;AAAA;AAAA,IAED,YAAY,GAAG;AACdA,oBAAA,MAAA,MAAA,SAAA,gCAAc,aAAa,CAAC;AAAA,IAG7B;AAAA,EACD;AACD;;;;;;;;;;;;;;;ACjHA,GAAG,WAAW,eAAe;"}